from django.shortcuts import render
from django.http import HttpResponseRedirect
from .models import Status, Car, Driver, Itinerary
from .forms import StatusForm, CarForm, DriverForm, ItineraryForm


def index(request):
    itinerary = Itinerary.objects.all()
    return render(request, "index.html", {'itinerary': itinerary})


def createItinerary(request):
    if request.method == "POST":
        form = ItineraryForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("")
    else:
        form = ItineraryForm()
    return render(request, "createItinerary.html", {'form': form})


def displayStatus(request):
    status = Status.objects.all()
    return render(request, "displayStatus.html", {'status': status})


def createStatus(request):
    if request.method == "POST":
        form = StatusForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("/")
    else:
        form = StatusForm()
    return render(request, "createStatus.html", {'form': form})


def displayCar(request):
    car = Car.objects.all()
    return render(request, "displayCar.html", {'car': car})


def createCar(request):
    if request.method == "POST":
        form = CarForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("/")
    else:
        form = CarForm()
    return render(request, "createCar.html", {'form': form})


def displayDriver(request):
    driver = Driver.objects.all()
    return render(request, "displayDriver.html", {'driver': driver})


def createDriver(request):
    if request.method == "POST":
        form = DriverForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("/displayDriver/")
    else:
        form = DriverForm()
    return render(request, "createDriver.html", {'form': form})
